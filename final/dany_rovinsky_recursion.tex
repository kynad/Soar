\documentclass[3p,times]{elsarticle} % final,
\usepackage{times}
\usepackage[T1]{fontenc}
\usepackage[latin1]{inputenc}

\usepackage{verbatim}
\usepackage[active]{srcltx}

\usepackage{draftwatermark}
\SetWatermarkText{\today}
\SetWatermarkScale{0.8}
%\usepackage[onEveryPage]{coffee}
%\usepackage[]{coffee}

% Figures
\usepackage{wrapfig}
% \usepackage{etoolbox}
\usepackage{graphicx}
\usepackage{subfigure}

% Algorithms
\usepackage[ruled]{algorithm}
%\usepackage{algorithm}
%\usepackage[noend]{algorithmic}
\usepackage{algorithmicx}
\usepackage[noend]{algpseudocode}

% Math
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{conjecture}{Conjecture}[section]
\newtheorem{corollary}{Corollary}[section]
\newtheorem{definition}{Definition}[section]

% Math notations
\newcommand{\pre}{\mathop{\mathrm{preconds}}}
\newcommand{\term}{\mathop{\mathrm{termconds}}}


% Procedure calls
\newcommand{\noun}[1]{\textsc{#1}}


\begin{document}

\begin{frontmatter}
\title{Individual Plan Execution with Recursion}
\author{Dany Rovinsky\\304359276}
\address{Computer Science Department\\
Bar Ilan University, Israel}
%ead{dany.rovinsky@gmail.com}

\begin{abstract}
Building on top of the \textit{BIPE2} algorithm, this paper suggests the \textit{BIPER (Bar Ilan Plan Execution with Recursion)} algorithm which implements recursive approach to impasse resolution.
\end{abstract}

\end{frontmatter}

\section{BIPER Explained}

\subsection{CaaP - \noun{Choose} as a Plan}

The original \textit{BIPE2} algorithm was delegating impasse resolution to a \noun{Choose} procedure that was assumed to be given. In contrast to the original work, the \textit{BIPER} algorithm suggested in this paper assumes an impasse resolution, \textit{Choose} has a form of a plan, rather than a procedure and uses recursive calls to itself in order to execute this plan to solve both sequential and hierarchical impasses, including nested impasses.

\subsection{Communication Over  Knowledgebase}

In order to communicate the impasse situation (i.e. the behaviors to choose from, or "Impasse Set") to the \textit{Choose} plan, as well as receiving the feedback from \textit{Choose} (i.e. the selected behavior, or "Impasse Resolution"), the agent's knowledgebase will be used. Here, I separate between the agent's knowledgebase, consistent among all its components and code pieces, and a component-specific (or code-specific) knowledgebase, which is internal to some specific component and isn't accessible to others. \textit{BIPER} requires access to the consistent knowledgebase $W$ and assumes that the \textit{Choose} plan contains behaviors that will extract the tuple $<k,v>$ from $W$, where $k$ is some agreed upon variable name for the impasse set and $v$ is the impasse set. Additional behavior expected to be part of \textit{Choose} is one that will store the chosen behavior in $W$, as another tuple $<\overline{k},\overline{v}>$, where $\overline{k}$ is another agreed upon variable name, identified as the impasse resolution and $\overline{v}$ is the chosen behavior.



\begin{algorithm}[htbp]
\caption{Individual decision-making algorithm \textbf{with recursion}.}
\label{alg:ibc}
\input{algorithms/individual-with-recursion.tex}
\end{algorithm}

%TODO: Explain algorithm
Besides the \noun{Choose} procedure, Algorithm~\ref{alg:ibc} also relies on procedures for accessing a stack
which holds the behaviors selected for execution, for getting new updates from the world modeling processes
(\noun{Update}), and for merging these updates with the knowledge-base that the robot maintains of its
beliefs (\noun{Revise}).  The procedures \noun{Start} and \noun{Stop} are used to begin and end
execution of a given behavior. In that, I am adopting a view of behaviors as separate threads,
which are controlled from Algorithm~\ref{alg:ibc}.

\end{document}
